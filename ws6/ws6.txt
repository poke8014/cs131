Script started on 2022-10-19 02:05:27-04:00

CREATING SCRIPT
]0;luc@sjsu:~/cs131/ws6[luc@sjsu ws6]$ vi cronshell.sh
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;26r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[26;1H"cronshell.sh" [New File][2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[2;1H[94m~                                                                                            [3;1H~                                                                                            [4;1H~                                                                                            [5;1H~                                                                                            [6;1H~                                                                                            [7;1H~                                                                                            [8;1H~                                                                                            [9;1H~                                                                                            [10;1H~                                                                                            [11;1H~                                                                                            [12;1H~                                                                                            [13;1H~                                                                                            [14;1H~                                                                                            [15;1H~                                                                                            [16;1H~                                                                                            [17;1H~                                                                                            [18;1H~                                                                                            [19;1H~                                                                                            [20;1H~                                                                                            [21;1H~                                                                                            [22;1H~                                                                                            [23;1H~                                                                                            [24;1H~                                                                                            [25;1H~                                                                                            [m[26;76H0,0-1[9CAll[1;1H[?25h[27m[23m[29m[m[H[2J[?25l[2;1H[94m~                                                                                            [3;1H~                                                                                            [4;1H~                                                                                            [5;1H~                                                                                            [6;1H~                                                                                            [7;1H~                                                                                            [8;1H~                                                                                            [9;1H~                                                                                            [10;1H~                                                                                            [11;1H~                                                                                            [12;1H~                                                                                            [13;1H~                                                                                            [14;1H~                                                                                            [15;1H~                                                                                            [16;1H~                                                                                            [17;1H~                                                                                            [18;1H~                                                                                            [19;1H~                                                                                            [20;1H~                                                                                            [21;1H~                                                                                            [22;1H~                                                                                            [23;1H~                                                                                            [24;1H~                                                                                            [25;1H~                                                                                            [m[26;76H0,0-1[9CAll
"cronshell.sh" [New File][1;1H[?25h[?25l[26;1H[1m-- INSERT --[m[26;13H[K[26;76H0,1[11CAll[1;1H[96m#!/bin/bash[m[2;1H[K[3;1H[93mmkdir[m [38;5;224m-p[m ~/cs131/ws6/PRODUCTS/[3;31H[K[4;1H[93mfgrep[m [38;5;224m-h[m [93m"[m[95m0262181533[m[93m"[m[4;22H[K[4;22H[?25h[?25l ~/amazon_reviews_us_Books_v1_02.tsv [93m>[m ~/cs131/ws6/PRODUCTS/[95m02621815[?25h[?25l33[m.tt[5;1Hxt[5;3H[K[6;1H[93mexport[m[1m[96m DATETIME=[m[38;5;81m$([m[38;5;224mdate +%Y%m%d_%H%M%S [m[38;5;81m)[m[6;40H[K[7;1Hcp ~/cs131/ws6/PRODU[7;21H[K[7;21H[?25h[?25lCTS/[95m0262181533[m.txt ~/cs131/ws6/PRODUCTS/[95m0262181533[m.[38;5;81m$DATETIME[m.txt[8;1H[K[8;1H[?25h[?25l[93mrm[m [38;5;224m-f[m ~/cs131/ws6/PRODUCTS/[95m0262181533[m.LATEST.txt
ln [38;5;224m-s[m ~/cs131/ws[9;17H[K[9;17H[?25h[?25l6/PRODUCTS/[95m0262181533[m.[38;5;81m$DATETIME[m.txt ~/cs131/ws6/PRODUCTS/[95m0262181[?25h[?25l533[m.LATEST.txx[10;1Ht[10;2H[K[11;1Hcat ~/cs131/ws6/PRODUCTS/[95m0262181533[m.LATEST.txt[11;47H[K[12;1H[K[13;1Ha[13;2H[K[13;2H[?25h[?25lwk [38;5;224m-F[m [93m'[m[95m    [m[93m'[m [93m'[m[95m{print $8}[m[93m'[m ~/cs131/ws6/PRODUCTS/[95m0262181533[m.LATES[?25h[?25lT.txt | awk [93m'[m[95m{ total += $1; cc[14;1Hount++ } END { print total/count}[m[93m'[m[14;35H[K[14;35H[?25h[?25l [93m>[m ~/cs131/ws6/PRODUCTS/[95m0262181533[m.AVGRATING.txt[15;1H[K[16;1Hcat ~/cs131/w[16;14H[K[16;14H[?25h[?25l[26;1H[K[16;14Hs6/PRODUCTS/[95m0262181533[m.AVGRATING.txt[26;76H13,49[9CAll[16;49H[?25h[?25l[26;66H~@k[16;49H[26;66H   [15;1H[26;77H2,0-1[15;1H[?25h[?25l[26;66H~@k[15;1H[26;66H   [13;49H[26;77H1,49 [13;49H[?25h[?25l[26;66H~@k[13;49H[26;66H   [12;1H[26;77H0,0-1[12;1H[?25h[?25l[26;66H~@k[12;1H[26;66H   [13;49H[26;77H1,49 [13;49H[?25h[?25l[26;66H~@k[13;49H[26;66H   [13;48H[26;80H8[13;48H[?25h[?25l[26;66H~@k[13;48H[26;66H   [13;47H[26;80H7[13;47H[?25h[?25l[26;66H~@k[13;47H[26;66H   [13;46H[26;80H6[13;46H[?25h[?25l[26;66H~@k[13;46H[26;66H   [13;45H[26;80H5[13;45H[?25h[?25l[26;66H~@k[13;45H[26;66H   [13;44H[26;80H4[13;44H[?25h[?25l[26;66H~@k[13;44H[26;66H   [13;43H[26;80H3[13;43H[?25h[?25l[26;66H~@k[13;43H[26;66H   [13;42H[26;80H2[13;42H[?25h[?25l[26;66H~@k[13;42H[26;66H   [13;41H[26;80H1[13;41H[?25h[?25l[26;66H~@k[13;41H[26;66H   [13;40H[26;80H0[13;40H[?25h[?25l[26;66H~@k[13;40H[26;66H   [13;39H[26;79H39[13;39H[?25h[?25l[26;66H~@k[13;39H[26;66H   [13;38H[26;80H8[13;38H[?25h[?25l[26;66H~@k[13;38H[26;66H   [13;37H[26;80H7[13;37H[?25h[?25l[26;66H~@k[13;37H[26;66H   [13;36H[26;80H6[13;36H[?25h[?25l[26;66H~@k[13;36H[26;66H   [13;35H[26;80H5[13;35H[?25h[?25l[26;66H~@k[13;35H[26;66H   [13;34H[26;80H4[13;34H[?25h[?25l[26;66H~@k[13;34H[26;66H   [13;33H[26;80H3[13;33H[?25h[?25l[26;66H~@k[13;33H[26;66H   [13;32H[26;80H2[13;32H[?25h[?25l[26;66H~@k[13;32H[26;66H   [13;31H[26;80H1[13;31H[?25h[?25l[26;66H~@k[13;31H[26;66H   [13;30H[26;80H0[13;30H[?25h[?25l[26;66H~@k[13;30H[26;66H   [13;29H[26;79H29[13;29H[?25h[?25l[26;66H~@k[13;29H[26;66H   [13;28H[26;80H8[13;28H[?25h[?25l[26;66H~@k[13;28H[26;66H   [13;27H[26;80H7[13;27H[?25h[?25l[26;66H~@k[13;27H[26;66H   [13;26H[26;80H6[13;26H[?25h[?25l[26;66H~@k[13;26H[26;66H   [13;25H[26;80H5[13;25H[?25h[?25l[26;66H~@k[13;25H[26;66H   [13;24H[26;80H4[13;24H[?25h[?25l[26;66H~@k[13;24H[26;66H   [13;23H[26;80H3[13;23H[?25h[?25l[26;66H~@k[13;23H[26;66H   [13;22H[26;80H2[13;22H[?25h[?25l[26;66H~@k[13;22H[26;66H   [13;21H[26;80H1[13;21H[?25h[?25l[26;66H~@k[13;21H[26;66H   [13;20H[26;80H0[13;20H[?25h[?25l[26;66H~@k[13;20H[26;66H   [13;19H[26;79H19[13;19H[?25h[?25l[26;66H~@k[13;19H[26;66H   [13;18H[26;80H8[13;18H[?25h[?25l[26;66H~@k[13;18H[26;66H   [13;17H[26;80H7[13;17H[?25h[?25l[26;66H~@k[13;17H[26;66H   [13;16H[26;80H6[13;16H[?25h[?25l[26;66H~@k[13;16H[26;66H   [13;15H[26;80H5[13;15H[?25h[?25l[26;66H~@k[13;15H[26;66H   [13;14H[26;80H4[13;14H[?25h[?25l[26;66H~@k[13;14H[26;66H   [13;13H[26;80H3[13;13H[?25h[?25l[26;66H~@k[13;13H[26;66H   [13;12H[26;80H2[13;12H[?25h[?25l[26;66H~@k[13;12H[26;66H   [13;11H[26;80H1[13;11H[?25h[?25l[26;66H~@k[13;11H[26;66H   [13;10H[26;80H0[13;10H[?25h[?25l[26;66Hi[13;10H[26;66H [13;10H[26;1H[1m-- INSERT --[m[26;76H[K[26;76H11,10[9CAll[13;10H[?25h[?25l[26;80H1[13;11H[?25h[?25l[26;80H2[13;12H[?25h[?25l[26;80H3[13;13H[?25h[?25l[93m'[m [93m'[m[95m{print $8}[m[93m'[m ~/cs131/ws6/PRODUCTS/[95m026218153[m[1C.LATEST.txt | awk [93m'[m[95m{ total += $1; coo[14;1Hunt++ } END { print total/count}[m[93m'[m [93m>[m ~/cs131/ws6/PRODUCTS/[95m026218153[m[1C.AVGRATING.txt[14;82H[K[26;80H2[13;12H[?25h[?25l[93m'[m [93m'[m[95m{print $8}[m[93m'[m ~/cs131/ws6/PRODUCTS/[95m026218153[m[1C.LATEST.txt | awk [93m'[m[95m{ total += $1; couu[14;1Hnt++ } END { print total/count}[m[93m'[m [93m>[m ~/cs131/ws6/PRODUCTS/[95m026218153[m[1C.AVGRATING.txt[14;81H[K[26;80H1[13;11H[?25h[?25l[93m'[m [93m'[m[95m{print $8}[m[93m'[m ~/cs131/ws6/PRODUCTS/[95m026218153[m[1C.LATEST.txt | awk [93m'[m[95m{ total += $1; counn[14;1Ht++ } END { print total/count}[m[93m'[m [93m>[m ~/cs131/ws6/PRODUCTS/[95m026218153[m[1C.AVGRATING.txt[14;80H[K[26;80H0[13;10H[?25h[?25l[93m'[m [93m'[m[95m{print $8}[m[93m'[m ~/cs131/ws6/PRODUCTS/[95m026218153[m[1C.LATEST.txt | awk [93m'[m[95m{ total += $1; countt[14;1H++ } END { print total/count}[m[93m'[m [93m>[m ~/cs131/ws6/PRODUCTS/[95m026218153[m[1C.AVGRATING.txt[14;79H[K[26;79H9 [13;9H[?25h[38;5;81m^[?25l[m[26;66H^V[13;9H[?25h[?25l[26;68H^I[13;9H[93m'[m[26;66H    [13;9H[95m        [m[93m'[m [93m'[m[95m{print $8}[m[93m'[m ~/cs131/ws6/PRODUCTS/[95m0262181533[m.LATEST.txt | awk [93m'[m[95m{ total += $$[14;1H1; count++ } END { print total/count}[m[93m'[m [93m>[m ~/cs131/ws6/PRODUCTS/[95m0262181533[m.AVGRATING.txt[26;79H10-17[13;17H[?25h[26;1H[K[13;16H[?25l[26;66H^[[13;16H[26;66H  [13;17H[26;76H11,9-16[7CAll[13;16H[?25h[?25l[26;66H:[13;16H[26;66H[K[26;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h
[?25l[?2004l"cronshell.sh" [New] 13L, 681C written

CHANGING SCRIPT PERMISSIONS
[?2004l[?1l>[?25h[?1049l[23;0;0t]0;luc@sjsu:~/cs131/ws6[luc@sjsu ws6]$ chmod +x ~/cs131/ws6/cronshell.sh 
]0;luc@sjsu:~/cs131/ws6[luc@sjsu ws6]$ crontab -e
[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;26r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[26;1H"/tmp/crontab.R7qHlp" 2L, 62C[1;1H* * * * * ~/cs131/ws6/cronshell.sh > ~/cs131/ws6/db.log 2>&1

[94m~                                                                                            [4;1H~                                                                                            [5;1H~                                                                                            [6;1H~                                                                                            [7;1H~                                                                                            [8;1H~                                                                                            [9;1H~                                                                                            [10;1H~                                                                                            [11;1H~                                                                                            [12;1H~                                                                                            [13;1H~                                                                                            [14;1H~                                                                                            [15;1H~                                                                                            [16;1H~                                                                                            [17;1H~                                                                                            [18;1H~                                                                                            [19;1H~                                                                                            [20;1H~                                                                                            [21;1H~                                                                                            [22;1H~                                                                                            [23;1H~                                                                                            [24;1H~                                                                                            [25;1H~                                                                                            [1;1H[?25h[?25l[m[26;1H[K[26;1H:[?2004h[?25hwq
[?25l[?2004l"/tmp/crontab.R7qHlp" 2L, 62C written


[?2004l[?1l>[?25h[?1049l[23;0;0tcrontab: installing new crontab


DISPLAYING SCRIPT
]0;luc@sjsu:~/cs131/ws6[luc@sjsu ws6]$ cat cronshell.sh 
#!/bin/bash

mkdir -p ~/cs131/ws6/PRODUCTS/
fgrep -h "0262181533" ~/amazon_reviews_us_Books_v1_02.tsv > ~/cs131/ws6/PRODUCTS/0262181533.txt
export DATETIME=$(date +%Y%m%d_%H%M%S )
cp ~/cs131/ws6/PRODUCTS/0262181533.txt ~/cs131/ws6/PRODUCTS/0262181533.$DATETIME.txt
rm -f ~/cs131/ws6/PRODUCTS/0262181533.LATEST.txt
ln -s ~/cs131/ws6/PRODUCTS/0262181533.$DATETIME.txt ~/cs131/ws6/PRODUCTS/0262181533.LATEST.txt
cat ~/cs131/ws6/PRODUCTS/0262181533.LATEST.txt

awk -F '	' '{print $8}' ~/cs131/ws6/PRODUCTS/0262181533.LATEST.txt | awk '{ total += $1; count++ } END { print total/count}' > ~/cs131/ws6/PRODUCTS/0262181533.AVGRATING.txt

cat ~/cs131/ws6/PRODUCTS/0262181533.AVGRATING.txt

DISPLAYING CRONTAB
]0;luc@sjsu:~/cs131/ws6[luc@sjsu ws6]$ crontab -l
* * * * * ~/cs131/ws6/cronshell.sh > ~/cs131/ws6/db.log 2>&1

]0;luc@sjsu:~/cs131/ws6[luc@sjsu ws6]$ ls
[0m[38;5;40mcronshell.sh[0m  db.log  [38;5;33mPRODUCTS[0m  ws6.txt
]0;luc@sjsu:~/cs131/ws6[luc@sjsu ws6]$ cd PRODUCTS/

AVERAGE OF PRODUCT RATINGS
]0;luc@sjsu:~/cs131/ws6/PRODUCTS[luc@sjsu PRODUCTS]$ cat 0262181533.AVGRATING.txt 
4.5
